import{r as n,j as e}from"./main-lwMNbbMv.js";const v=()=>{const c=n.useRef([]);n.useRef(null);const a=n.useRef(null),[r,u]=n.useState(null),[l,j]=n.useState(null),[m,f]=n.useState(null);n.useEffect(()=>{fetch("/official/data/careers.json").then(s=>{if(!s.ok)throw new Error("キャリアデータの読み込みに失敗しました");return s.json()}).then(s=>j(s)).catch(s=>{console.error("Error loading careers:",s),f(s.message)})},[]),n.useEffect(()=>{if(!l)return;const t=new IntersectionObserver(s=>{s.forEach(i=>{i.isIntersecting&&i.target.classList.add("timeline-item-visible")})},{threshold:.1});return c.current.forEach(s=>{s&&t.observe(s)}),()=>{c.current.forEach(s=>{s&&t.unobserve(s)})}},[l]),n.useEffect(()=>{const t=()=>{if(!a.current)return;const s=a.current,i=s.getBoundingClientRect(),o=(window.innerHeight-i.top)/(i.height+window.innerHeight);s.style.setProperty("--scroll-progress",Math.max(0,Math.min(1,o)))};return window.addEventListener("scroll",t),t(),()=>window.removeEventListener("scroll",t)},[l]);const p=t=>{const s=c.current[t],i=r===t;u(i?null:t),s&&setTimeout(()=>{const d=s.getBoundingClientRect().top+window.pageYOffset-120;window.scrollTo({top:d,behavior:"smooth"})},i?0:50)};return m?e.jsxs("div",{children:["Error: ",m]}):l?e.jsx("section",{id:"career",className:"section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"section-title",children:"職務経歴"}),e.jsx("div",{ref:a,className:"timeline",children:l.map((t,s)=>e.jsxs("div",{className:"timeline-item",ref:i=>c.current[s]=i,style:{"--item-index":s},children:[e.jsx("div",{className:"timeline-info",children:e.jsx("span",{className:"timeline-period",children:t.period})}),e.jsx("div",{className:"timeline-marker"}),e.jsxs("div",{className:`timeline-content ${r===s?"expanded":""}`,onClick:()=>t.projects&&p(s),children:[e.jsxs("div",{className:"timeline-header",children:[e.jsxs("div",{className:"timeline-title",children:[e.jsx("h3",{className:"timeline-company",children:t.company}),e.jsx("h4",{className:"timeline-position",children:t.position})]}),t.projects&&e.jsx("span",{className:`toggle-icon ${r===s?"open":""}`,children:r===s?"−":"＋"})]}),e.jsx("p",{className:"timeline-duties",children:t.duties}),t.projects&&r===s&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"参加プロジェクト"}),e.jsx("div",{className:"projects-list",children:t.projects.map((i,o)=>e.jsxs("div",{className:"project-details",children:[e.jsx("h4",{children:i.title}),e.jsx("p",{className:"project-period",children:i.period}),e.jsx("p",{children:i.description}),e.jsxs("div",{className:"project-info",children:[e.jsx("h5",{children:"担当業務："}),e.jsx("ul",{children:i.tasks.map((h,d)=>e.jsx("li",{children:h},d))}),e.jsxs("p",{children:[e.jsx("strong",{children:"環境："})," ",i.environment]}),e.jsxs("p",{children:[e.jsx("strong",{children:"役割："})," ",i.role]})]})]},o))})]})]})]},s))})]})}):e.jsx("div",{children:"Loading..."})};export{v as default};
