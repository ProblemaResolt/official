<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
      const pathname = location.pathname;
      // /official または /official/ の場合はリダイレクトせずSPAに任せる
      if (pathname === '/official' || pathname === '/official/') {
        // 何もしない
      } else if (pathname === '/official/official' || pathname === '/official/official/') {
        location.replace('/official');
      } else if (pathname.startsWith('/official/official/')) {
        location.replace(pathname.replace('/official/official', '/official'));
      } else {
        // 通常のリダイレクト処理
        const isExternalRedirect = document.referrer && new URL(document.referrer).host !== location.host;
        if (isExternalRedirect) {
          const segments = pathname.replace(/^\/official\/?/, '');
          location.replace('/official/' + segments);
        } else {
          const segments = pathname.replace(/^\/official\/?/, '');
          sessionStorage.setItem('redirect', segments);
          location.replace('/official/');
        }
      }
    </script>
  </head>
  <body>
    Redirecting...
  </body>
</html>
